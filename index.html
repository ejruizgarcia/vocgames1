<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1º ESO - Vocabulary practice</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;700;800&display=swap');

        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(90deg, #1e40af 0%, #ef4444 100%);
            min-height: 100vh;
        }

        .game-button {
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .game-button:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }
        
        /* Estilos para el modal */
        #gameModal.hidden {
            display: none;
        }

        /* Estilos para Tooltips */
        .tooltip {
            position: absolute;
            bottom: 140%; /* Posicionar encima del icono */
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(17, 24, 39, 0.7); /* Fondo oscuro con 70% de opacidad */
            color: #fff;
            text-align: center;
            padding: 6px 12px;
            border-radius: 6px;
            z-index: 50; /* Z-index alto para asegurar que esté en la capa superior */
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.3s;
            white-space: nowrap;
            font-size: 0.8rem;
            pointer-events: none; /* Evitar que el tooltip interfiera con el ratón */
            backdrop-filter: blur(2px); /* Efecto de desenfoque */
        }

        .tooltip-container:hover .tooltip {
            visibility: visible;
            opacity: 1;
        }
        
        /* Efecto para el mensaje de copiado */
        .copied-feedback {
            animation: fadeAndMoveDown 2s ease-out forwards;
        }

        @keyframes fadeAndMoveDown {
            0% {
                opacity: 1;
                transform: translate(-50%, 0);
            }
            100% {
                opacity: 0;
                transform: translate(-50%, 25px); /* Animación hacia abajo */
            }
        }

    </style>
</head>

<body class="overflow-x-hidden">
    <div class="container mx-auto px-4 py-12">
        <!-- Título -->
        <div class="text-center mb-12">
            <h1 class="text-4xl md:text-6xl font-extrabold text-white rounded-full bg-opacity-20 bg-white px-6 py-4 inline-block shadow-lg">
                1º ESO - Vocabulary practice
            </h1>
        </div>

        <!-- Contenedor de botones -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 max-w-6xl mx-auto">
            <!-- Plantilla de Tarjeta de Juego -->
            <template id="gameCardTemplate">
                 <div class="game-button bg-white rounded-2xl p-6 pb-16 text-center shadow-lg relative min-h-[320px] flex flex-col justify-start">
                    <div class="flex-grow">
                        <div class="unit-color text-white rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-4">
                            <span class="text-3xl font-bold unit-number"></span>
                        </div>
                        <h2 class="text-lg font-bold text-blue-800 unit-title"></h2>
                        <p class="text-sm font-light text-gray-600 mt-2 px-2 unit-category"></p>
                    </div>
                    <!-- Contenedor de iconos centrado -->
                    <div class="absolute bottom-4 left-0 right-0 flex justify-center items-center space-x-4">
                        <!-- Icono de Copiar -->
                        <div class="tooltip-container relative">
                            <button class="copy-button text-gray-400 hover:text-gray-700 transition-colors p-2 rounded-full hover:bg-gray-100">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                  <path stroke-linecap="round" stroke-linejoin="round" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                                </svg>
                            </button>
                            <span class="tooltip">Copy the URL to send to your students</span>
                        </div>
                        <!-- Icono de Google Classroom -->
                        <div class="tooltip-container relative">
                            <a href="#" target="_blank" rel="noopener noreferrer" class="classroom-link text-gray-500 hover:text-gray-800 transition-colors p-2 rounded-full hover:bg-gray-100 flex items-center justify-center">
                               <svg class="h-7 w-7" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M21.5 5.5H2.5C2.22386 5.5 2 5.72386 2 6V18C2 18.2761 2.22386 18.5 2.5 18.5H21.5C21.7761 18.5 22 18.2761 22 18V6C22 5.72386 21.7761 5.5 21.5 5.5Z" stroke="#FBBC05" stroke-width="1.5" fill="#34A853"></path>
                                    <path d="M12 11C13.3807 11 14.5 9.88071 14.5 8.5C14.5 7.11929 13.3807 6 12 6C10.6193 6 9.5 7.11929 9.5 8.5C9.5 9.88071 10.6193 11 12 11Z" fill="white"></path>
                                    <path d="M16 16.5H8C7.72386 16.5 7.5 16.2761 7.5 16V15C7.5 13.6193 8.61929 12.5 10 12.5H14C15.3807 12.5 16.5 13.6193 16.5 15V16C16.5 16.2761 16.2761 16.5 16 16.5Z" fill="white"></path>
                                </svg>
                            </a>
                            <span class="tooltip">Share on Google Classroom</span>
                        </div>
                    </div>
                </div>
            </template>
            <!-- Contenedor para las tarjetas generadas -->
            <div id="cards-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 col-span-full"></div>
        </div>

        <!-- Footer -->
        <footer class="mt-16 text-center text-white opacity-80 text-sm">
            <p>Esta app ha sido desarrollada por Eduardo Ruiz (@ejruizgarcia), 2025, utilizando Canva y tiene licencia CC BY-NC 4.0.</p>
        </footer>
    </div>

    <!-- Modal para el juego -->
    <div id="gameModal" class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-2xl shadow-2xl w-full max-w-6xl h-[90vh] p-4 relative">
            <button id="closeModal" class="absolute -top-4 -right-4 bg-red-500 text-white rounded-full h-10 w-10 flex items-center justify-center text-2xl font-bold z-10">&times;</button>
            <div class="w-full h-full bg-gray-200 rounded-lg overflow-hidden">
                <iframe id="gameFrame" src="" class="w-full h-full border-0" allowfullscreen></iframe>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const gameData = [
                { unit: 1, title: "This is my life", category: "Family, Physical descriptions, Personality description, Friendships", url: "https://www.canva.com/design/DAGnKtI_m24/tv3MkRtUGVVWQGbVdxpHKA/view?embed", color: "bg-blue-600" },
                { unit: 2, title: "Welcome to our school", category: "Activities and routines, Free time activities, School and facilities", url: "https://www.canva.com/design/DAGmtZagp6U/bwuJRwqSvNQHTRL-R1L8sw/view?embed", color: "bg-blue-500" },
                { unit: 3, title: "What do you want to play?", category: "Adjectives, Sports", url: "https://www.canva.com/design/DAGnENLg210/0mUKSMSBgW20RtxvwQybmg/view?embed", color: "bg-blue-400" },
                { unit: 4, title: "What we wear", category: "Clothes, Adjectives to describe feelings", url: "https://www.canva.com/design/DAGnEdxY6o4/baq9g6ndEhwyu46SyscbUw/view?embed", color: "bg-purple-500" },
                { unit: 5, title: "Eat up", category: "Supermarkets, Food and drinks, Meals, Adjectives to describe food", url: "https://www.canva.com/design/DAGnEFQD5ek/4k5pqsdu1itAJ79as2ZIMw/view?embed", color: "bg-purple-400" },
                { unit: 6, title: "Island Life", category: "Geographical features, Weather, Animals", url: "https://www.canva.com/design/DAGmyjPRu5Q/Xju3ZK0_08wWUvahh2oSQQ/view?embed", color: "bg-pink-500" },
                { unit: 7, title: "Let’s start a band!", category: "Musical instruments and bands, Stages of life", url: "https://www.canva.com/design/DAGnKSheZ1g/py9N3xFeZg0UIXfDKVaWcw/view?embed", color: "bg-red-400" },
                { unit: 8, title: "Around town", category: "The city, Adjectives to describe places", url: "https://www.canva.com/design/DAGmeT3N5aE/uDMHd7FamtF9U9dAN2Q9_Q/view?embed", color: "bg-red-500" },
            ];

            const cardsContainer = document.getElementById('cards-container');
            const template = document.getElementById('gameCardTemplate').content;

            gameData.forEach(data => {
                const card = template.cloneNode(true);
                const gameButton = card.querySelector('.game-button');
                
                card.querySelector('.unit-number').textContent = data.unit;
                card.querySelector('.unit-title').textContent = `Unit ${data.unit}: ${data.title}`;
                card.querySelector('.unit-category').textContent = data.category;
                const unitColorDiv = card.querySelector('.unit-color');
                unitColorDiv.classList.remove('unit-color');
                unitColorDiv.classList.add(data.color);

                gameButton.addEventListener('click', (e) => {
                    if (e.target.closest('.copy-button') || e.target.closest('.classroom-link')) {
                        return;
                    }
                    openModal(data.url)
                });
                
                const copyButton = card.querySelector('.copy-button');
                const classroomLink = card.querySelector('.classroom-link');

                const shareUrl = data.url.replace('?embed', '');
                const classroomTitle = `Unit ${data.unit}: ${data.title} - Vocabulary Practice`;
                classroomLink.href = `https://classroom.google.com/share?url=${encodeURIComponent(shareUrl)}&title=${encodeURIComponent(classroomTitle)}`;
                classroomLink.addEventListener('click', (e) => e.stopPropagation());

                copyButton.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const urlToCopy = data.url.replace('?embed', '');
                    
                    const textArea = document.createElement("textarea");
                    textArea.value = urlToCopy;
                    textArea.style.position = "fixed";
                    textArea.style.left = "-9999px";
                    document.body.appendChild(textArea);
                    textArea.focus();
                    textArea.select();
                    try {
                        document.execCommand('copy');
                        const feedback = document.createElement('div');
                        feedback.textContent = 'Copied!';
                        feedback.className = 'absolute top-full mt-2 left-1/2 bg-green-500 text-white text-xs font-bold py-1 px-3 rounded-full copied-feedback';
                        copyButton.parentElement.appendChild(feedback);
                        setTimeout(() => feedback.remove(), 2000);
                    } catch (err) {
                        console.error('Fallback: Oops, unable to copy', err);
                    }
                    document.body.removeChild(textArea);
                });

                cardsContainer.appendChild(card);
            });

            const gameModal = document.getElementById('gameModal');
            const closeModalBtn = document.getElementById('closeModal');
            const gameFrame = document.getElementById('gameFrame');

            const openModal = (embedUrl) => {
                gameFrame.src = embedUrl;
                gameModal.classList.remove('hidden');
                document.body.style.overflow = 'hidden';
            };



            const closeModal = () => {
                gameFrame.src = "";
                gameModal.classList.add('hidden');
                document.body.style.overflow = '';
            };

            closeModalBtn.addEventListener('click', closeModal);
            gameModal.addEventListener('click', (event) => {
                if (event.target === gameModal) closeModal();
            });
            document.addEventListener('keydown', (event) => {
                if (event.key === 'Escape' && !gameModal.classList.contains('hidden')) closeModal();
            });
        });
    </script>
</body>
</html>
